---
description: The main interface to interact with EC
---

# ECommerceInterface

You use the ECommerce set of classes when you want to deal with the underlying EC APIs. With EC, you handle things such as [title management](title-objects/) and [payment information](payment-objects/). And you also have the option to handle components such as [device information](ecdeviceinfo.md), permitting identification of the console in several ways.

For every page, you'll want to initialize the `ECommerceInterface` type.

```javascript
var ec = new ECommerceInterface();
```

This special type inherits from `ECGenericObject`, an internal C++ type that many others use as a parent. You should only create this specific object type once per page load in JS, as it calls the specical function `EC_Init` internally.

Inside of EC, there is a JS "[test mode](ecommerceinterface.md#js-test-mode-operations)" that allows modification of objects that are normally not modifiable via JS. This must be enabled at compile time, or with a patch to the binary.

## Members



| Member Name                                                                                                                          | Discussion                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| ------------------------------------------------------------------------------------------------------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `ec.getVersion()`                                                                                                                    | Returns the EC library's version number. As of the Wii Shop Channel v21, this is `264192`, or `0x40800`.                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `ec.setParameter(name, value)`                                                                                                       | <p>Sets multiple internal EC library values.<br><br>Known names are:<br>- <code>TIN</code>: a unique title number within games.<br>-<code>AppId</code>: the current running title ID.<br>-<code>PCPW</code>: Parental Control pin/password.<br>-<code>USE_NCRS</code>: (unknown, accepts 0/1)<br>-<code>SPACE_CHECK_POLICY</code>:with a value of <code>SPACE_CHECK_USER_ONLY</code> or <code>SPACE_CHECK_ENTIRE_FS</code>.</p><p></p><p>This calls <code>EC_SetParameter</code> internally. The Wii Shop Channel does not set a TIN as many games might.</p> |
| `ec.getSessionValue(name)`                                                                                                           | <p>For the current EC object, get a value for the given <code>name</code> from an internal store.<br><br>This key will persist within the internal store for the duration of the channel's runtime.</p>                                                                                                                                                                                                                                                                                                                                                       |
| `ec.setSessionValue(name, value)`                                                                                                    | Sets the key for `name`  to `value` within the internal store.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| `ec.getPersistentValue(name)`                                                                                                        | Obtains a value by `name` from `ec.cfg`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `ec.setPersistentValue(name, value)`                                                                                                 | Sets a key by `name` to `value` in `ec.cfg`.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| <p><code>ec.getProgress()</code><br><code>ec.getProgress(id)</code></p>                                                              | Obtain a value on the state of the given operation, or the most recent operation. Returns -4007 if no operation is ongoing.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `ec.cancelOperation()`                                                                                                               | Cancels the current operation.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <p>ec.purchaseTitle(tifasddsfsdf <br><br>ðŸ”’ Requires HTTPS</p>                                                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.purchaseGiftTitle()</code><br><br>ðŸ”’ Requires HTTPS</p>                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.acceptGiftTitle()</code><br></p><p><mark style="color:green;">ðŸ”’ Requires HTTPS</mark></p>                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.unregister()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.deleteOwnership()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.syncTickets()`                                                                                                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.checkDeviceStatus()`                                                                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.refreshCachedBalance()`                                                                                                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.getCachedBalance()`                                                                                                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.getPurchaseInfo()`                                                                                                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.getTransactionInfos()`                                                                                                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.purchasePoints()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.downloadTitle()`                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.checkFirmware()`                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.generateKeyPair()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>        | Returns -4002 - possibly not implemented?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <p><code>ec.confirmKeyPair()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>         | Returns -4002 - possibly not implemented?                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| `ec.checkRegistration()`                                                                                                             | Makes a request via ECS for the `CheckRegistration` type.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <p><code>ec.register()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.transfer()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.syncRegistration()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.sendChallengeReq()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.getChallengeResp()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.reportCSS()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.confirmCSS()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.getCSSConfirmation()`                                                                                                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.getTitleInfo()`                                                                                                                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.getTitleInfos()`                                                                                                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.getTicketInfos()`                                                                                                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| `ec.getDeviceInfo()`                                                                                                                 | Returns an object you can use to access information with. See its dedicated page, \[\[ecdeviceinfo]], for more information.                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| <p><code>ec.setWebSvcUrls(ecs)</code><br><code>ec.setWebSvcUrls(ecs, ias)</code><br><code>ec.setWebSvcUrls(ecs, ias, cas)</code></p> | Sets endpoints for usage. `ecs`  is the ECommerceSOAP endpoint, `ias`  is the IdentityAuthenticationSOAP endpoint, and `cas` is the CatalogingSOAP endpoint. CAS is not used within the Wii Shop Channel - used in other ECDK-utilizing titles, such as for DLC content.                                                                                                                                                                                                                                                                                      |
| <p><code>ec.setContentUrls(ccs)</code><br><code>ec.setContentUrls(ccs, ucs)</code></p>                                               | `ccs` appears to be an `http` URL by default, presumably meaning "cached contents". `ucs` may mean "uncached contents", using an `https` URL.                                                                                                                                                                                                                                                                                                                                                                                                                 |
| `ec.checkParentalControlPassword(pin)`                                                                                               | Validates the given Parental Control PIN/password as a long. If this is disabled, it returns -0xfeb/-4075.                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| `ec.launchTitle(titleId, ticketId)`                                                                                                  | Launches the passed title with the given ticket.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| `ec.request(requestString)`                                                                                                          | Requests something, with a callback. \*\*TODO\*\*                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| <p><code>ec.getWeakToken()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| <p><code>ec.setOption()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>              | Sets an option within EC.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| <p><code>ec.startLog()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>               | Creates a new logging buffer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <p><code>ec.stopLog()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>                | Destroys the present logging buffer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| <p><code>ec.getLog()</code><br><br>ðŸ”’ <mark style="color:green;">Requires HTTPS</mark></p>                 | Returns a string with the internal held log from buffer.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

## JS Test Mode Operations

These following functions **do not function** without the JS test mode being enabled via binary patching. They will log such if called. Do not expect them to work.

| Member Name               | Discussion                                              |
| ------------------------- | ------------------------------------------------------- |
| `ec.setLanguage()`        | Overrides the configured language for this EC object.   |
| `ec.setCountry()`         | Overrides the configured country for this EC object.    |
| `ec.setRegion()`          | Overrides the configured region for this EC object.     |
| `ec.setAge()`             | Overrides the configured age for this EC object.        |
| `ec.setAccountId()`       | Overrides the configured account ID for this EC object. |
| `ec.deleteTitleContent()` |                                                         |
| `ec.deleteTitle()`        |                                                         |
| `ec.pubKeyEncrypt()`      |                                                         |
| `ec.runTests()`           |                                                         |
