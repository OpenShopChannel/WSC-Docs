---
description: WiiConnect24 functionality, directly within JS
---

# NWC24

To send mail via WiiConnect24 and query error code strings, you utilize `wiiNwc24`. With mail, you can send normal messages, or gift titles. And via error codes, you can provide a better user experience.

```
var nwc24 = new wiiNwc24();
```

## Methods

| Method Name                                                        | Discussion                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| ------------------------------------------------------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| `nwc24.getFriendNum()`                                             | Returns the amount of friends on the user's friends list.                                                                                                                                                                                                                                                                                                                                                                                                                   |
| `nwc24.getFriendInfo(num, type)`                                   | Queries information about the given friend list entry at `num`. For all possible `type` values, see [Friends List](nwc24.md#friends-list).                                                                                                                                                                                                                                                                                                                                  |
| `nwc24.sendGiftMailAsync(friendIndex, urlPath, message, miiIndex)` | <p>Sends a mail using the gift design template with a body of the given <code>message</code>. The recipient is specified by <code>friendIndex</code> from the friends list. The sending user adds their Mii via <code>miiIndex</code>. <code>urlPath</code> is the URL this channel opens to when the Start button is clicked.<br><br>Please see <a href="nwc24.md#async-handling">Async Handling</a> for more information about the workflow for handling mail errors.</p> |
| `nwc24.sendReturnMailAsync(friendIndex, message, miiIndex)`        | Similar to the above, however lacking the `url` parameter. The gift return design template is used.                                                                                                                                                                                                                                                                                                                                                                         |
| `nwc24.sendNormalMailAsync(friendIndex, message, miiIndex)`        | Similar to the above. As the name implies, no mail design template is applied.                                                                                                                                                                                                                                                                                                                                                                                              |
| `nwc24.isBusy()`                                                   | Returns whether the internal mail engine is currently processing an operation.                                                                                                                                                                                                                                                                                                                                                                                              |
| `nwc24.dispError(code, type)`                                      | <p>Displays an error with <code>code</code>. There are 3 available types, though they appear ambiguous:</p><ul><li>No type (or no arguments) displays an error screen with "Wii Menu" and "Reset Channel".</li><li>Type <code>2</code> appears to have a "Wii Menu" and "Reset Channel" button, though sometimes it does not.</li><li>Type <code>8</code> appears to only show "Reset Channel".</li></ul>                                                                   |
| `nwc24.doLeftBtn()`                                                | Handles function for the button displayed on the left within errors. Depending on the error type, the button either effectively goes to the last loaded page in history, or it resets the channel.                                                                                                                                                                                                                                                                          |
| `nwc24.doRightBtn()`                                               | Called whenever the button on the right within error pages is selected. Depending on the error type, it either loads the initially loaded URL (for example, `/startup`) or resets the channel.                                                                                                                                                                                                                                                                              |

### Friends List

You query information about entries within the user's friends list via `nwc24.getFriendInfo(num, type)`. There are three available query types:

| Query Type | Discussion                                                                                       |
| ---------- | ------------------------------------------------------------------------------------------------ |
| `name`     | Returns the registered name for this friend as a string.                                         |
| `userId`   | Returns the registered friend code as a string.                                                  |
| `miiImage` | Returns a usable character ID for Mii image lookup. For more information, see [CID](mii.md#cid). |

### Async Handling

Unlike [ECProgress](ec/ecprogress.md) as utilized within EC, Nintendo chose yet another design. Users are expected to repeatedly query `nwc24.isBusy()` for&#x20;

## Properties (Get)

| Property Name                                                     | Discussion                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| ----------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| `nwc24.myUserId`                                                  | Returns a string with the current console's friend code.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| <p><code>nwc24.errCode</code><br><code>nwc24.mailErrNo</code></p> | Returns a number with the current registered mail error code.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| `nwc24.errCodeWithLabel`                                          | <p>Returns a string with a formatted error code.<br>For example, assuming a console with its language set to English, one might return "Error code: 123456".</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| `nwc24.errMsg`                                                    | Returns a localized string with a description of the error message.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| `nwc24.ready`                                                     | <p>Returns a boolean on whether an NWC24 error has been set.<br><br>TODO: Is this fully what the function performs?</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| `nwc24.sendable`                                                  | <p>Determines on whether a message can be sent at call time, i.e. if the scheduler is busy.<br><br>TODO: Verify logic</p>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| <p><code>nwc24.leftBtn</code><br><code>nwc24.rightBtn</code></p>  | <p>Returns a localized string to be displayed on the button within the given side of the page.<br><br>The button's string is determined from several factors.<br>For the right button:</p><ul><li><p>Is there a pending NWC24 error?</p><ul><li>If so, and the error is of type 4 or 10, the error is the localization of "Reset".</li><li>Otherwise, the string is the localization of "OK".</li></ul></li></ul><p>For the left button:</p><ul><li><p>Is there a pending NWC24 error?</p><ul><li>If so, and the current error minus seven (?) is greater than 2, or the current error is 10, localize "Try Again".</li></ul></li></ul><ul><li><p>What is the current launch code for the channel?</p><ul><li>If the launch code is 2 or 8, localize "Back".</li><li>Otherwise, localize "Wii Menu".</li></ul></li></ul> |
